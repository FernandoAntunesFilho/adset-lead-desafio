<h2>Cadastro de Carro</h2>

<form [formGroup]="cadastroForm" (ngSubmit)="onSubmit()">
  <label>
    Marca:
    <input formControlName="marca" />
  </label>
  <div
    *ngIf="
      cadastroForm.get('marca')?.invalid && cadastroForm.get('marca')?.touched
    "
  >
    Marca √© obrigat√≥ria.
  </div>

  <label>
    Modelo:
    <input formControlName="modelo" />
  </label>
  <div
    *ngIf="
      cadastroForm.get('modelo')?.invalid && cadastroForm.get('modelo')?.touched
    "
  >
    Modelo √© obrigat√≥rio.
  </div>

  <label>
    Ano:
    <input type="number" formControlName="ano" />
  </label>
  <div
    *ngIf="cadastroForm.get('ano')?.invalid && cadastroForm.get('ano')?.touched"
  >
    Ano inv√°lido.
  </div>

  <label>
    Placa:
    <input formControlName="placa" />
  </label>
  <div
    *ngIf="
      cadastroForm.get('placa')?.invalid && cadastroForm.get('placa')?.touched
    "
  >
    Placa √© obrigat√≥ria.
  </div>

  <label>
    Cor:
    <input formControlName="cor" />
  </label>

  <label>
    Pre√ßo:
    <input type="number" formControlName="preco" />
  </label>
  <div
    *ngIf="
      cadastroForm.get('preco')?.invalid && cadastroForm.get('preco')?.touched
    "
  >
    Pre√ßo √© obrigat√≥rio.
  </div>

  <label>
    Opcionais:
    <input formControlName="listaOpcionais" />
  </label>

  <label>
    Quilometragem:
    <input type="number" formControlName="quilometragem" />
  </label>

  <div formArrayName="portalPacotes">
    <div [formGroupName]="0">
      <h3>Pacote ICarros</h3>
      <label>
        <input type="radio" formControlName="pacote" [value]="1" /> Bronze
      </label>
      <label>
        <input type="radio" formControlName="pacote" [value]="2" /> Diamante
      </label>
      <label>
        <input type="radio" formControlName="pacote" [value]="3" /> Platinum
      </label>
      <label>
        <input type="radio" formControlName="pacote" [value]="4" /> B√°sico
      </label>
    </div>

    <div [formGroupName]="1">
      <h3>Pacote Webmotors</h3>
      <label>
        <input type="radio" formControlName="pacote" [value]="1" /> Bronze
      </label>
      <label>
        <input type="radio" formControlName="pacote" [value]="2" /> Diamante
      </label>
      <label>
        <input type="radio" formControlName="pacote" [value]="3" /> Platinum
      </label>
      <label>
        <input type="radio" formControlName="pacote" [value]="4" /> B√°sico
      </label>
    </div>
  </div>

  <div formArrayName="fotos">
    <label>Fotos (URLs):</label>

    <div
      *ngFor="let fotoGroup of fotos.controls; let i = index"
      [formGroupName]="i"
      style="margin-bottom: 10px"
    >
      <input
        formControlName="url"
        placeholder="URL da foto"
        style="width: 60%"
      />

      <img
        *ngIf="fotoGroup.get('url')?.value"
        [src]="fotoGroup.get('url')?.value"
        alt="Preview da foto"
        width="80"
        height="60"
        style="object-fit: cover; border-radius: 4px; margin-left: 10px"
      />

      <button type="button" (click)="removerFoto(i)" style="margin-left: 10px">
        üóëÔ∏è
      </button>
    </div>

    <button
      type="button"
      (click)="adicionarFoto()"
      [disabled]="fotos.length >= 15"
    >
      ‚ûï Adicionar Foto
    </button>
  </div>

  <button type="submit">Cadastrar</button>
  <button [routerLink]="['/carros']">Voltar</button>
</form>

<div *ngIf="sucesso" style="color: green">Carro cadastrado com sucesso!</div>

<div *ngIf="erro" style="color: red">
  {{ erro }}
</div>
